(function(e,t,i,s){i.swipebox=function(o,a){var n,r={useCSS:true,useSVG:true,initialIndexOnArray:0,removeBarsOnMobile:true,hideCloseButtonOnMobile:false,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,nextSlide:null,prevSlide:null,loopAtEnd:false,autoplayVideos:false,queryStringData:{},toggleClassOnLoad:""},l=this,d=[],p,c=o.selector,f=i(c),b=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),u=b!==null||t.createTouch!==s||"ontouchstart"in e||"onmsgesturechange"in e||navigator.msMaxTouchPoints,h=!!t.createElementNS&&!!t.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,w=e.innerWidth?e.innerWidth:i(e).width(),g=e.innerHeight?e.innerHeight:i(e).height(),m=0,v='<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-container">\t\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t\t<div id="swipebox-top-bar">\t\t\t\t\t\t\t<div id="swipebox-title"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="swipebox-bottom-bar">\t\t\t\t\t\t\t<div id="swipebox-arrows">\t\t\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t\t<div id="picNav" class="slide-nav">\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t</div>';l.settings={};i.swipebox.close=function(){n.closeSlide()};i.swipebox.extend=function(){return n};l.init=function(){l.settings=i.extend({},r,a);if(i.isArray(o)){d=o;n.target=i(e);n.init(l.settings.initialIndexOnArray)}else{i(t).on("click",c,function(e){if(e.target.parentNode.className==="slide current"){return false}if(!i.isArray(o)){n.destroy();p=i(c);n.actions()}d=[];var t,s,a;if(!a){s="data-rel";a=i(this).attr(s)}if(!a){s="rel";a=i(this).attr(s)}if(a&&a!==""&&a!=="nofollow"){p=f.filter("["+s+'="'+a+'"]')}else{p=i(c)}p.each(function(){var e=null,t=null;if(i(this).attr("title")){e=i(this).attr("title")}if(i(this).attr("href")){t=i(this).attr("href")}d.push({href:t,title:e})});t=p.index(i(this));e.preventDefault();e.stopPropagation();n.target=i(e.target);n.init(t)})}};n={init:function(e){if(l.settings.beforeOpen){l.settings.beforeOpen()}this.target.trigger("swipebox-start");i.swipebox.isOpen=true;this.build();this.openSlide(e);this.openMedia(e);this.preloadMedia(e+1);this.preloadMedia(e-1);if(l.settings.afterOpen){l.settings.afterOpen()}},build:function(){var e=this,t;i("body").append(v);if(h&&l.settings.useSVG===true){t=i("#swipebox-close").css("background-image");t=t.replace("png","svg");i("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":t})}if(b&&l.settings.removeBarsOnMobile){i("#swipebox-bottom-bar, #swipebox-top-bar").remove()}i.each(d,function(){i("#swipebox-slider").append('<div class="slide"></div>');i("#picNav").append("<span></span>")});e.setDim();e.actions();if(u){e.gesture()}e.keyboard();e.animBars();e.resize()},setDim:function(){var t,s,o={};if("onorientationchange"in e){e.addEventListener("orientationchange",function(){if(e.orientation===0){t=w;s=g}else if(e.orientation===90||e.orientation===-90){t=g;s=w}},false)}else{t=e.innerWidth?e.innerWidth:i(e).width();s=e.innerHeight?e.innerHeight:i(e).height()}o={width:t,height:s};i("#swipebox-overlay").css(o)},resize:function(){var t=this;i(e).resize(function(){t.setDim()}).resize()},supportTransition:function(){var e="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),i;for(i=0;i<e.length;i++){if(t.createElement("div").style[e[i]]!==s){return e[i]}}return false},doCssTrans:function(){if(l.settings.useCSS&&this.supportTransition()){return true}},gesture:function(){var e=this,t,s,o,a,n,r,l=false,p=false,c=10,f=50,b={},u={},h=i("#swipebox-top-bar, #swipebox-bottom-bar"),g=i("#swipebox-slider");h.addClass("visible-bars");e.setTimeout();i("body").bind("touchstart",function(e){i(this).addClass("touching");t=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current"));u=e.originalEvent.targetTouches[0];b.pageX=e.originalEvent.targetTouches[0].pageX;b.pageY=e.originalEvent.targetTouches[0].pageY;i("#swipebox-slider").css({"-webkit-transform":"translate3d("+m+"%, 0, 0)",transform:"translate3d("+m+"%, 0, 0)"});i(".touching").bind("touchmove",function(e){e.preventDefault();e.stopPropagation();u=e.originalEvent.targetTouches[0];if(!p){n=o;o=u.pageY-b.pageY;if(Math.abs(o)>=f||l){var h=.75-Math.abs(o)/g.height();g.css({top:o+"px"});g.css({opacity:h});l=true}}a=s;s=u.pageX-b.pageX;r=s*100/w;if(!p&&!l&&Math.abs(s)>=c){i("#swipebox-slider").css({"-webkit-transition":"",transition:""});p=true}if(p){if(0<s){if(0===t){i("#swipebox-overlay").addClass("leftSpringTouch")}else{i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");i("#swipebox-slider").css({"-webkit-transform":"translate3d("+(m+r)+"%, 0, 0)",transform:"translate3d("+(m+r)+"%, 0, 0)"})}}else if(0>s){if(d.length===t+1){i("#swipebox-overlay").addClass("rightSpringTouch")}else{i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");i("#swipebox-slider").css({"-webkit-transform":"translate3d("+(m+r)+"%, 0, 0)",transform:"translate3d("+(m+r)+"%, 0, 0)"})}}}});return false}).bind("touchend",function(t){t.preventDefault();t.stopPropagation();i("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"});o=u.pageY-b.pageY;s=u.pageX-b.pageX;r=s*100/w;if(l){l=false;if(Math.abs(o)>=2*f&&Math.abs(o)>Math.abs(n)){var d=o>0?g.height():-g.height();g.animate({top:d+"px",opacity:0},300,function(){e.closeSlide()})}else{g.animate({top:0,opacity:1},300)}}else if(p){p=false;if(s>=c&&s>=a){e.getPrev()}else if(s<=-c&&s<=a){e.getNext()}}else{if(!h.hasClass("visible-bars")){e.showBars();e.setTimeout()}else{e.clearTimeout();e.hideBars()}}i("#swipebox-slider").css({"-webkit-transform":"translate3d("+m+"%, 0, 0)",transform:"translate3d("+m+"%, 0, 0)"});i("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");i(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(l.settings.hideBarsDelay>0){var t=this;t.clearTimeout();t.timeout=e.setTimeout(function(){t.hideBars()},l.settings.hideBarsDelay)}},clearTimeout:function(){e.clearTimeout(this.timeout);this.timeout=null},showBars:function(){var e=i("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){e.addClass("visible-bars")}else{i("#swipebox-top-bar").animate({top:0},500);i("#swipebox-bottom-bar").animate({bottom:0},500);setTimeout(function(){e.addClass("visible-bars")},1e3)}},hideBars:function(){var e=i("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){e.removeClass("visible-bars")}else{i("#swipebox-top-bar").animate({top:"-50px"},500);i("#swipebox-bottom-bar").animate({bottom:"-50px"},500);setTimeout(function(){e.removeClass("visible-bars")},1e3)}},animBars:function(){var e=this,t=i("#swipebox-top-bar, #swipebox-bottom-bar");t.addClass("visible-bars");e.setTimeout();i("#swipebox-slider").click(function(){if(!t.hasClass("visible-bars")){e.showBars();e.setTimeout()}});i("#swipebox-bottom-bar").hover(function(){e.showBars();t.addClass("visible-bars");e.clearTimeout()},function(){if(l.settings.hideBarsDelay>0){t.removeClass("visible-bars");e.setTimeout()}})},keyboard:function(){var t=this;i(e).bind("keyup",function(e){e.preventDefault();e.stopPropagation();if(e.keyCode===37){t.getPrev()}else if(e.keyCode===39){t.getNext()}else if(e.keyCode===27){t.closeSlide()}})},actions:function(){var e=this,t="touchend click";if(d.length<2){i("#swipebox-bottom-bar").hide();if(s===d[1]){i("#swipebox-top-bar").hide()}}else{i("#swipebox-prev").bind(t,function(t){t.preventDefault();t.stopPropagation();e.getPrev();e.setTimeout()});i("#swipebox-next").bind(t,function(t){t.preventDefault();t.stopPropagation();e.getNext();e.setTimeout()})}i("#swipebox-close").bind(t,function(){e.closeSlide()})},setSlide:function(e,t){t=t||false;var s=i("#swipebox-slider");m=-e*100;if(this.doCssTrans()){s.css({"-webkit-transform":"translate3d("+-e*100+"%, 0, 0)",transform:"translate3d("+-e*100+"%, 0, 0)"})}else{s.animate({left:-e*100+"%"})}i("#swipebox-slider .slide").removeClass("current");i("#picNav span").removeClass("curr");i("#swipebox-slider .slide").eq(e).addClass("current");i("#picNav span").eq(e).addClass("curr");this.setTitle(e);if(t){s.fadeIn()}i("#swipebox-prev, #swipebox-next").removeClass("disabled");if(e===0){i("#swipebox-prev").addClass("disabled")}else if(e===d.length-1&&l.settings.loopAtEnd!==true){i("#swipebox-next").addClass("disabled")}},openSlide:function(t){i("html").addClass("swipebox-html");if(u){i("html").addClass("swipebox-touch");if(l.settings.hideCloseButtonOnMobile){i("html").addClass("swipebox-no-close-button")}}else{i("html").addClass("swipebox-no-touch")}i(e).trigger("resize");this.setSlide(t,true)},preloadMedia:function(e){var t=this,i=null;if(d[e]!==s){i=d[e].href}if(!t.isVideo(i)){setTimeout(function(){t.openMedia(e)},1e3)}else{t.openMedia(e)}},openMedia:function(e){var t=this,o,a;if(d[e]!==s){o=d[e].href}if(e<0||e>=d.length){return false}a=i("#swipebox-slider .slide").eq(e);if(!t.isVideo(o)){a.addClass("slide-loading");t.loadMedia(o,function(){a.removeClass("slide-loading");a.html(this)})}else{a.html(t.getVideo(o))}},setTitle:function(e){var t=null;i("#swipebox-title").empty();if(d[e]!==s){t=d[e].title}if(t){i("#swipebox-top-bar").show();i("#swipebox-title").append(t)}else{i("#swipebox-top-bar").hide()}},isVideo:function(e){if(e){if(e.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||e.match(/vimeo\.com\/([0-9]*)/)||e.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)){return true}if(e.toLowerCase().indexOf("swipeboxvideo=1")>=0){return true}}},parseUri:function(e,s){var o=t.createElement("a"),a={};o.href=decodeURIComponent(e);if(o.search){a=JSON.parse('{"'+o.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')}if(i.isPlainObject(s)){a=i.extend(a,s,l.settings.queryStringData)}return i.map(a,function(e,t){if(e&&e>""){return encodeURIComponent(t)+"="+encodeURIComponent(e)}}).join("&")},getVideo:function(e){var t="",i=e.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),s=e.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),o=e.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),a="";if(i||s){if(s){i=s}a=n.parseUri(e,{autoplay:l.settings.autoplayVideos?"1":"0",v:""});t='<iframe width="560" height="315" src="//'+i[1]+"/embed/"+i[2]+"?"+a+'" frameborder="0" allowfullscreen></iframe>'}else if(o){a=n.parseUri(e,{autoplay:l.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:l.settings.vimeoColor});t='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+o[1]+"?"+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{t='<iframe width="560" height="315" src="'+e+'" frameborder="0" allowfullscreen></iframe>'}return'<div class="swipebox-video-container" style="max-width:'+l.settings.videoMaxWidth+'px"><div class="swipebox-video">'+t+"</div></div>"},loadMedia:function(e,t){if(e.trim().indexOf("#")===0){t.call(i("<div>",{class:"swipebox-inline-container"}).append(i(e).clone().toggleClass(l.settings.toggleClassOnLoad)))}else{if(!this.isVideo(e)){var s=i("<img>").on("load",function(){t.call(s)});s.attr("src",e)}}},getNext:function(){var e=this,t,s=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current"));if(s+1<d.length){t=i("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");i("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",t);s++;e.setSlide(s);e.preloadMedia(s+1);if(l.settings.nextSlide){l.settings.nextSlide()}}else{if(l.settings.loopAtEnd===true){t=i("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src");i("#swipebox-slider .slide").eq(s).contents().find("iframe").attr("src",t);s=0;e.preloadMedia(s);e.setSlide(s);e.preloadMedia(s+1);if(l.settings.nextSlide){l.settings.nextSlide()}}else{i("#swipebox-overlay").addClass("rightSpring");setTimeout(function(){i("#swipebox-overlay").removeClass("rightSpring")},500)}}},getPrev:function(){var e=i("#swipebox-slider .slide").index(i("#swipebox-slider .slide.current")),t;if(e>0){t=i("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src");i("#swipebox-slider .slide").eq(e).contents().find("iframe").attr("src",t);e--;this.setSlide(e);this.preloadMedia(e-1);if(l.settings.prevSlide){l.settings.prevSlide()}}else{i("#swipebox-overlay").addClass("leftSpring");setTimeout(function(){i("#swipebox-overlay").removeClass("leftSpring")},500)}},nextSlide:function(){},prevSlide:function(){},closeSlide:function(){i("html").removeClass("swipebox-html");i("html").removeClass("swipebox-touch");i(e).trigger("resize");this.destroy()},destroy:function(){i(e).unbind("keyup");i("body").unbind("touchstart");i("body").unbind("touchmove");i("body").unbind("touchend");i("#swipebox-slider").unbind();i("#swipebox-overlay").remove();if(!i.isArray(o)){o.removeData("_swipebox")}if(this.target){this.target.trigger("swipebox-destroy")}i.swipebox.isOpen=false;if(l.settings.afterClose){l.settings.afterClose()}}};l.init()};i.fn.swipebox=function(e){if(!i.data(this,"_swipebox")){var t=new i.swipebox(this,e);this.data("_swipebox",t)}return this.data("_swipebox")}})(window,document,jQuery);